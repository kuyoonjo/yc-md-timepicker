angular.module("yc.md.timepicker",[]).directive("ycMdTimepicker",function(){return{restrict:"E",transclude:!0,require:"ngModel",scope:{ngModel:"=ngModel",ctrl:"=ctrl",showMeridian:"=showMeridian",meridian:"=meridian"},controller:["$scope",function(a){function b(){if(a.ngModel){if(a.showMeridian){a.meridians=a.meridian||["AM","PM"];var b,c=a.ngModel.getHours();c>=12?(c-=12,b=a.meridians[1]):b=a.meridians[0],0==c&&(c=12),a.ctrl.hours=c,a.ctrl.meridian=b}else a.ctrl.hours=a.ngModel.getHours();a.ctrl.minutes=a.ngModel.getMinutes()}}function c(b){return a.showMeridian?b.hours>=1&&b.hours<=12&&b.minutes>=0&&b.minutes<=59:b.hours>=0&&b.hours<=23&&b.minutes>=0&&b.minutes<=59}a.ctrl=this,a.ngModel||(a.ngModel=new Date),a.$watch("ngModel",b),this.swithMeridian=function(){a.ctrl.meridian==a.meridians[0]?a.ctrl.meridian=a.meridians[1]:a.ctrl.meridian=a.meridians[0]},a.$watch("ctrl",function(b){if(a.ngModel&&c(b))if(a.showMeridian){var d=b.hours;12==d&&(d-=12),b.meridian==a.meridians[1]&&(d+=12),a.ngModel.setHours(d,b.minutes)}else a.ngModel.setHours(b.hours,b.minutes)},!0)}],template:"<ng-transclude></ng-transclude>"}});